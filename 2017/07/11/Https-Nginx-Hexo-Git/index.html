<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.3.0"><link rel="apple-touch-icon" sizes="180x180" href="https://blog-1253475808.file.myqcloud.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://blog-1253475808.file.myqcloud.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://blog-1253475808.file.myqcloud.com/favicon-16x16.png"><link rel="mask-icon" href="https://blog-1253475808.file.myqcloud.com/safari-pinned-tab.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noto+Sans+SC:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="https://fontawesome-1253475808.file.myqcloud.com/css/all.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/animate.css/3.1.1/animate.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><script class="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"burgertown.tk",root:"/",images:"/images",scheme:"Gemini",version:"8.2.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12},copycode:!1,bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!0,lazyload:!0,pangu:!0,comments:{style:"tabs",active:null,storage:!0,lazyload:!0,nav:null},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"fadeInDown",post_body:"fadeInDown",coll_header:"fadeInLeft",sidebar:"fadeInUp"}},prism:!1,i18n:{placeholder:"搜索...",empty:"没有找到任何搜索结果：${query}",hits_time:"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）",hits:"找到 ${hits} 个搜索结果"}}</script><meta name="description" content="Https 是未来！"><meta property="og:type" content="article"><meta property="og:title" content="Https Nginx Hexo Git"><meta property="og:url" content="https://burgertown.tk/2017/07/11/Https-Nginx-Hexo-Git/index.html"><meta property="og:site_name" content="BurgerBlog"><meta property="og:description" content="Https 是未来！"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2017-07-11T12:12:09.000Z"><meta property="article:modified_time" content="2019-09-29T18:03:44.464Z"><meta property="article:author" content="BurgerTown"><meta property="article:tag" content="Web"><meta property="article:tag" content="VPS"><meta property="article:tag" content="Nginx"><meta property="article:tag" content="Https"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://burgertown.tk/2017/07/11/Https-Nginx-Hexo-Git/"><script data-pjax class="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>Https Nginx Hexo Git | BurgerBlog</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-117112515-2"></script><script data-pjax>if(CONFIG.hostname===location.hostname){function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-117112515-2")}</script><noscript><style>body{margin-top:2rem}.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header,.use-motion .sidebar{visibility:visible}.use-motion .footer,.use-motion .header,.use-motion .site-brand-container .toggle{opacity:initial}.use-motion .custom-logo-image,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line{transform:scaleX(1)}.search-pop-overlay,.sidebar-nav{display:none}.sidebar-panel{display:block}</style></noscript><link rel="alternate" href="/atom.xml" title="BurgerBlog" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><h1 class="site-title">BurgerBlog</h1><i class="logo-line"></i></a> <img class="custom-logo-image" src="https://blog-1253475808.file.myqcloud.com/favicon.png" alt="BurgerBlog"></div><div class="site-nav-right"><div class="toggle popup-trigger"></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">22</span></a></li><li class="menu-item menu-item-updatelogs"><a href="/updatelogs/" rel="section"><i class="fas fa-clipboard-check fa-fw"></i>日志</a></li></ul></nav></div><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%8D%E8%AE%B0"><span class="nav-text">前记</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9C%A8-VPS-%E4%B8%8A%E8%A3%85%E5%A5%BD-Http-%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-text">在 VPS 上装好 Http 服务器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%80%89%E6%8B%A9-SSL-%E8%AE%A4%E8%AF%81%E6%9C%BA%E6%9E%84%E4%B8%8E%E5%9F%9F%E5%90%8D%E6%89%98%E7%AE%A1%E6%9C%BA%E6%9E%84"><span class="nav-text">选择 SSL 认证机构与域名托管机构</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#SSLForFree-%E6%9C%89%E9%9D%9E%E5%B8%B8%E5%8F%8B%E5%A5%BD%E7%9A%84%E7%95%8C%E9%9D%A2"><span class="nav-text">SSLForFree 有非常友好的界面</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BE%88%E5%A4%9A%E4%BA%BA%E6%8E%A8%E8%8D%90%E7%9A%84-Let%E2%80%99s-Encrypt"><span class="nav-text">很多人推荐的 Let’s Encrypt</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-Http-%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E9%85%8D%E7%BD%AE%E4%BD%BF-SSL-%E7%94%9F%E6%95%88"><span class="nav-text">修改 Http 服务器的配置使 SSL 生效</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Windows-%E4%B8%8A%E7%9A%84%E6%90%AD%E5%BB%BA%E4%B8%8E%E9%85%8D%E7%BD%AE"><span class="nav-text">Windows 上的搭建与配置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E5%85%8D%E5%AF%86%EF%BC%88%E5%AF%86%E9%92%A5%EF%BC%89%E7%99%BB%E9%99%86"><span class="nav-text">配置免密（密钥）登陆</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E7%BD%91%E7%AB%99%E7%9B%AE%E5%BD%95"><span class="nav-text">创建网站目录</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E6%9B%B4%E6%96%B0"><span class="nav-text">配置更新</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#VPS-%E4%B8%8A%E9%85%8D%E7%BD%AE-Git-%E4%BD%BF%E5%85%B6%E8%87%AA%E5%8A%A8%E4%BB%8E%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2%E5%88%B0-VPS"><span class="nav-text">VPS 上配置 Git 使其自动从本地部署到 VPS</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9C%80%E5%90%8E"><span class="nav-text">最后</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="BurgerTown" src="https://blog-1253475808.file.myqcloud.com/favicon.png"><p class="site-author-name" itemprop="name">BurgerTown</p><div class="site-description" itemprop="description">Not too bad,hmm?</div></div><div class="site-state-wrap site-overview-item animated"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">22</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">2</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">14</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author site-overview-item animated"><span class="links-of-author-item"><a href="https://github.com/BurgerTown" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;BurgerTown" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i> GitHub</a></span><span class="links-of-author-item"><a href="https://t.me/BurgerTown_Lord" title="Telegram → https:&#x2F;&#x2F;t.me&#x2F;BurgerTown_Lord" rel="noopener" target="_blank"><i class="fab fa-telegram fa-fw"></i> Telegram</a></span><span class="links-of-author-item"><a href="https://blog-1253475808.file.myqcloud.com/atom.xml" title="RSS → https:&#x2F;&#x2F;blog-1253475808.file.myqcloud.com&#x2F;atom.xml" rel="noopener" target="_blank"><i class="fas fa-rss fa-fw"></i> RSS</a></span></div></div></div></div></aside><div class="sidebar-dimmer"></div></header><div class="back-to-top" role="button"><i class="fa fa-arrow-up"></i> <span>0%</span></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://burgertown.tk/2017/07/11/Https-Nginx-Hexo-Git/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="https://blog-1253475808.file.myqcloud.com/favicon.png"><meta itemprop="name" content="BurgerTown"><meta itemprop="description" content="Not too bad,hmm?"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="BurgerBlog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> Https Nginx Hexo Git</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2017-07-11 20:12:09" itemprop="dateCreated datePublished" datetime="2017-07-11T20:12:09+08:00">2017-07-11</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2019-09-30 02:03:44" itemprop="dateModified" datetime="2019-09-30T02:03:44+08:00">2019-09-30</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Tech/" itemprop="url" rel="index"><span itemprop="name">Tech</span></a></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i></span> <span class="post-meta-item-text">Waline：</span><a title="waline" href="/2017/07/11/Https-Nginx-Hexo-Git/#waline-comments" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" id="/2017/07/11/Https-Nginx-Hexo-Git/" data-xid="/2017/07/11/Https-Nginx-Hexo-Git/" itemprop="commentCount"></span></a></span><span id="/2017/07/11/Https-Nginx-Hexo-Git/" class="post-meta-item leancloud_visitors" data-flag-title="Https Nginx Hexo Git" title="阅读次数"><span class="post-meta-item-icon"><i class="far fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span class="leancloud-visitors-count"></span></span></div><div class="post-description">Https 是未来！</div></div></header><div class="post-body" itemprop="articleBody"><h2 id="前记"><a href="#前记" class="headerlink" title="前记"></a>前记</h2><p>由于没有备案 所以 Http 的 80 端口被腾讯封了</p><p>只要检测到有有访问到本机的 80 都会被重定向</p><p>就像这样 <a target="_blank" rel="noopener" href="http://burgertown.ga">http://burgertown.ga</a></p><p>一怒之下把 VPS 重做了系统</p><p>所以这一篇算是 Nginx 配置 Https 再用 Git Hooks 重新部署 Hexo 的笔记</p><h2 id="在-VPS-上装好-Http-服务器"><a href="#在-VPS-上装好-Http-服务器" class="headerlink" title="在 VPS 上装好 Http 服务器"></a>在 VPS 上装好 Http 服务器</h2><p>我的服务器是 CentOS 7.2</p><p>所以用下面的命令安装 Nginx</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install nginx</span><br></pre></td></tr></table></figure><h2 id="选择-SSL-认证机构与域名托管机构"><a href="#选择-SSL-认证机构与域名托管机构" class="headerlink" title="选择 SSL 认证机构与域名托管机构"></a>选择 SSL 认证机构与域名托管机构</h2><p>SSL 认证机构</p><blockquote><p>一开始询问群里的基佬们基本都是 <a target="_blank" rel="noopener" href="https://letsencrypt.org/">Let’s encrypt</a></p></blockquote><p>但是有人说 <a target="_blank" rel="noopener" href="https://www.sslforfree.com/">SSLForFree</a> 比较快速</p><p>这里记录一下我的过程吧</p><p>域名托管机构</p><blockquote><p>我是腾讯云的机子 就直接把域名放在 DNSPod 上托管了</p></blockquote><h3 id="SSLForFree-有非常友好的界面"><a href="#SSLForFree-有非常友好的界面" class="headerlink" title="SSLForFree 有非常友好的界面"></a>SSLForFree 有非常友好的界面</h3><p>直接按照提示输入自己想要认证的域名就可以了</p><p>然后会有三种认证方式给你选</p><ol><li><p>FTP 自动认证</p></li><li><p>手动认证</p></li><li><p>手动 DNS 认证</p></li></ol><p>由于我的 80 端口是被封了的 所以只能通过 DNS 认证</p><p>这一步很简单 就不多讲了 <del>摸鱼</del></p><p>直接在域名解析里根据他给的要求添加 TXT 解析就行了</p><h3 id="很多人推荐的-Let’s-Encrypt"><a href="#很多人推荐的-Let’s-Encrypt" class="headerlink" title="很多人推荐的 Let’s Encrypt"></a>很多人推荐的 Let’s Encrypt</h3><p>这个要用 Shell 来注册与认证</p><ol><li><p>首先登陆 <a target="_blank" rel="noopener" href="https://www.dnspod.cn/">DNSPod</a></p></li><li><p>在用户中心-&gt;安全设置中创建一个 API Token，并记录下 <code>ID</code> 和 <code>Token</code></p></li><li><p>这里我们用 <a target="_blank" rel="noopener" href="https://github.com/Neilpang/acme.sh">Neipang 的 ACME</a> 在 VPS 上执行下面的命令安装 ACME</p></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl https://get.acme.sh | sh</span><br></pre></td></tr></table></figure><ol start="4"><li><p>这里我们还是用 DNS 认证的方法 不过这次基本全自动了</p></li><li><p>先导入刚刚申请的 <code>ID</code> 和 <code>Token</code></p></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> DP_Id=<span class="string">&quot;1234&quot;</span></span><br><span class="line"><span class="built_in">export</span> DP_Key=<span class="string">&quot;sADDsdasdgdsf&quot;</span></span><br></pre></td></tr></table></figure><ol start="6"><li>执行下面的命令来 <code>issue</code> <del>我 TM 都不知道什么意思</del> 然后等待就行了</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --issue --dns dns_dp -d example.com -d www.example.com</span><br></pre></td></tr></table></figure><ol start="7"><li>其实到这里域名认证就做好了 但是为了后续方便 我们还要把认证文件”安装”到其他目录</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --install-cert -d example.com \</span><br><span class="line">--key-file       /path/to/keyfile/<span class="keyword">in</span>/nginx/key.pem  \</span><br><span class="line">--fullchain-file /path/to/fullchain/nginx/cert.pem \</span><br><span class="line">--reloadcmd     <span class="string">&quot;service nginx force-reload&quot;</span></span><br></pre></td></tr></table></figure><p>是不是很鸡儿乱？</p><p>我把我的写出来</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --install-cert -d burgertown.ga \</span><br><span class="line">--key-file       /root/ssl/key.pem  \</span><br><span class="line">--fullchain-file /root/ssl/cert.pem \</span><br><span class="line">--reloadcmd     <span class="string">&quot;systemctl reload nginx&quot;</span></span><br></pre></td></tr></table></figure><p>我是把认证文件”安装”到/root/ssl 文件夹下</p><p>因为 CentOS7 开始使用 <code>systemctl</code> 了 所以我也用了。.. 用 <code>service</code> 也是可以的</p><p><del>其实我把所有文件都扔到/root 下了 因为我懒</del></p><h2 id="修改-Http-服务器的配置使-SSL-生效"><a href="#修改-Http-服务器的配置使-SSL-生效" class="headerlink" title="修改 Http 服务器的配置使 SSL 生效"></a>修改 Http 服务器的配置使 SSL 生效</h2><p>Nginx 的配置文件在 <code>/etc/nginx/</code> 下</p><p>推荐在 <code>/etc/nginx/conf.d</code> 新建一个配置文件</p><p>然后写入以下内容 按照你自己的服务器具体情况修改啦</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">        listen       443; <span class="comment">#Https 默认监听端口 443</span></span><br><span class="line">        server_name  burgertown.ga; <span class="comment">#域名</span></span><br><span class="line"></span><br><span class="line">        ssl on;<span class="comment">#开启 SSL</span></span><br><span class="line">        ssl_certificate <span class="string">&quot;/root/ssl/cert.pem&quot;</span>; <span class="comment">#自行对比我的路径</span></span><br><span class="line">        ssl_certificate_key <span class="string">&quot;/root/ssl/key.pem&quot;</span>; <span class="comment">#同上</span></span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">        root /root/http; <span class="comment">#网站根目录</span></span><br><span class="line">        index index.html; <span class="comment">#索引文件 因为 hexo 是 html 所以我只写了 html</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="Windows-上的搭建与配置"><a href="#Windows-上的搭建与配置" class="headerlink" title="Windows 上的搭建与配置"></a>Windows 上的搭建与配置</h2><p>*<em>安装 <a target="_blank" rel="noopener" href="https://nodejs.org/en/download/">Node.js</a> *</em></p><p>*<em>安装 <a target="_blank" rel="noopener" href="https://git-scm.com/download/win">GitForWindows</a> *</em></p><h3 id="配置免密（密钥）登陆"><a href="#配置免密（密钥）登陆" class="headerlink" title="配置免密（密钥）登陆"></a>配置免密（密钥）登陆</h3><ol><li><p>打开 C:\Users&lt;用户名&gt;.ssh 文件夹，如果没有就新建</p></li><li><p>在空白处单击右键，选择 Git Bash Here 打开终端</p></li><li><p>设置 Git 用户名</p></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.email <span class="string">&quot;email@example.com&quot;</span></span><br><span class="line">git config --global user.name <span class="string">&quot;username&quot;</span></span><br></pre></td></tr></table></figure><ol start="4"><li>生成 SSH 密钥</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">&quot;email@example.com&quot;</span> <span class="comment">#一路回车也行 生成公钥和密钥</span></span><br></pre></td></tr></table></figure><h3 id="创建网站目录"><a href="#创建网站目录" class="headerlink" title="创建网站目录"></a>创建网站目录</h3><p>在你电脑的任意位置创建一个文件夹（例如 E:\hexo 下文以此代替） 作为网站目录</p><p>安装 Hexo 打开<code>cmd</code>，通过<code>cd</code>命令进入<code>hexo</code>文件夹，输入<code>node</code>后执行如下命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br><span class="line">hexo init</span><br><span class="line">npm install</span><br><span class="line">hexo d -<span class="built_in">fg</span></span><br><span class="line">hexo serve</span><br></pre></td></tr></table></figure><h3 id="配置更新"><a href="#配置更新" class="headerlink" title="配置更新"></a>配置更新</h3><p>修改 <code>hexo\_config.yml</code> 里面的 <code>depoly</code> 选项</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">    <span class="built_in">type</span>: git</span><br><span class="line">    message: update</span><br><span class="line">    repo:</span><br><span class="line">    s1: git@VPS 的 ip 地址或域名：git 仓库地址，master</span><br><span class="line"></span><br><span class="line"><span class="comment">##例如</span></span><br><span class="line">deploy:</span><br><span class="line">    <span class="built_in">type</span>: git</span><br><span class="line">    message: update</span><br><span class="line">    repo:</span><br><span class="line">    s1: git@192.234.35.236:hexo.git,master</span><br></pre></td></tr></table></figure><h2 id="VPS-上配置-Git-使其自动从本地部署到-VPS"><a href="#VPS-上配置-Git-使其自动从本地部署到-VPS" class="headerlink" title="VPS 上配置 Git 使其自动从本地部署到 VPS"></a>VPS 上配置 Git 使其自动从本地部署到 VPS</h2><p>利用下面的命令安装 Git</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install git</span><br></pre></td></tr></table></figure><p><del>你们也知道我懒了 所以我直接用 root 用户了</del></p><p>创建 Git 仓库，并配置 SSH 登录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mkdir .ssh &amp;&amp; <span class="built_in">cd</span> .ssh <span class="comment">#我是在 root 目录下</span></span><br><span class="line">touch authorized_keys</span><br><span class="line">vi authorized_keys <span class="comment">#用记事本打开 Windows 里。ssh 文件夹里面的 id_rsa.pub 全部复制粘贴进来</span></span><br><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line">mkdir hexo.git &amp;&amp; <span class="built_in">cd</span> hexo.git</span><br><span class="line">git init --bare</span><br></pre></td></tr></table></figure><p>配置 Git hooks</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> hooks</span><br><span class="line">touch post-receive</span><br></pre></td></tr></table></figure><p>内容如下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">GIT_REPO=/home/git/hexo.git <span class="comment">#git 仓库</span></span><br><span class="line">TMP_GIT_CLONE=/tmp/hexo</span><br><span class="line">PUBLIC_WWW=/var/www/hexo <span class="comment">#网站目录</span></span><br><span class="line">rm -rf <span class="variable">$&#123;TMP_GIT_CLONE&#125;</span></span><br><span class="line">git <span class="built_in">clone</span> <span class="variable">$GIT_REPO</span> <span class="variable">$TMP_GIT_CLONE</span></span><br><span class="line">rm -rf <span class="variable">$&#123;PUBLIC_WWW&#125;</span>/*</span><br><span class="line">cp -rf <span class="variable">$&#123;TMP_GIT_CLONE&#125;</span>/* <span class="variable">$&#123;PUBLIC_WWW&#125;</span></span><br></pre></td></tr></table></figure><p>然后赋予脚本的执行权限</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x post-receive</span><br></pre></td></tr></table></figure><p>最后重启 Nginx</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart nginx</span><br></pre></td></tr></table></figure><h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>那么以后我们</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new <span class="string">&quot;文章标题&quot;</span></span><br></pre></td></tr></table></figure><p>通过 <code>Markdown</code> 写好 <code>.md</code> 文章后</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo g <span class="comment">#生成静态页面</span></span><br><span class="line">hexo s <span class="comment">#部署本地服务器来查看效果</span></span><br><span class="line">hexo d <span class="comment">#满意后就可以部署到 VPS</span></span><br></pre></td></tr></table></figure><p>当然 Hexo 不止这样的用法</p><p>还可以直接部署到 GitBooks 或者 Github 这样的地方 摆脱了需要* VPS *这种条件</p><p>非常有趣</p><p>参考链接</p><p><a target="_blank" rel="noopener" href="http://tiktoking.github.io/2016/01/26/hexo/#u672C_u673A1_28_u4EE5windows_u4E3A_u4F8B_29_u7684_u64CD_u4F5C">在 VPS 上搭建 hexo 博客，利用 git 更新</a></p><p><a target="_blank" rel="noopener" href="https://github.com/lingmingyb/revision/blob/master/markdown_syntax.markdown">Markdown 语法说明笔记</a></p><p><a target="_blank" rel="noopener" href="https://wizardforcel.gitbooks.io/markdown-simple-world/index.html">Markdown - 简单的世界</a></p></div><footer class="post-footer"><div class="reward-container"><div>请我喝杯咖啡~</div> <button onclick='document.querySelector(".post-reward").classList.toggle("active")'> 赞赏</button><div class="post-reward"><div> <img src="https://blog-1253475808.file.myqcloud.com/wechatpay.png" alt="BurgerTown 微信"> <span>微信</span></div><div> <img src="https://blog-1253475808.file.myqcloud.com/alipay.png" alt="BurgerTown 支付宝"> <span>支付宝</span></div></div></div><div class="post-tags"><a href="/tags/Web/" rel="tag"><i class="fa fa-tag"></i> Web</a><a href="/tags/VPS/" rel="tag"><i class="fa fa-tag"></i> VPS</a><a href="/tags/Nginx/" rel="tag"><i class="fa fa-tag"></i> Nginx</a><a href="/tags/Https/" rel="tag"><i class="fa fa-tag"></i> Https</a></div><div class="post-nav"><div class="post-nav-item"><a href="/2017/06/20/Hello-World/" rel="prev" title="Hello World"><i class="fa fa-chevron-left"></i> Hello World</a></div><div class="post-nav-item"> <a href="/2017/07/20/Travel-To-Qinghai/" rel="next" title="青海之旅">青海之旅<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="waline-comments"></div><script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; <span itemprop="copyrightYear">2021</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">BurgerTown</span></div><div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动</div></div></footer><script src="https://blog-1253475808.file.myqcloud.com/custom_js/anime.min.js"></script><script src="https://blog-1253475808.file.myqcloud.com/custom_js/pjax.min.js"></script><script src="https://blog-1253475808.file.myqcloud.com/custom_js/medium-zoom.min.js"></script><script src="https://blog-1253475808.file.myqcloud.com/custom_js/lozad.min.js"></script><script src="https://lib.baomitu.com/pangu/4.0.7/pangu.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '.page-configurations',
    '.main-inner',
    '.post-toc-wrap',
    '.languages',
    '.pjax'
  ],
  analytics: false,
  cacheBust: false,
  scrollRestoration: false,
  scrollTo: !CONFIG.bookmark.enable
});

document.addEventListener('pjax:success', () => {
  pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  const hasTOC = document.querySelector('.post-toc');
  document.querySelector('.sidebar-inner').classList.toggle('sidebar-nav-active', hasTOC);
  document.querySelector(hasTOC ? '.sidebar-nav-toc' : '.sidebar-nav-overview').click();
  NexT.utils.updateSidebarPosition();
});
</script><script>
    NProgress.configure({
      showSpinner: true
    });
    NProgress.start();
    document.addEventListener('readystatechange', () => {
      if (document.readyState === 'interactive') {
        NProgress.inc(0.8);
      }
      if (document.readyState === 'complete') {
        NProgress.done();
      }
    });
    document.addEventListener('pjax:send', () => {
      NProgress.start();
    });
    document.addEventListener('pjax:success', () => {
      NProgress.done();
    });
  </script><div class="pjax"><script>
NexT.utils.loadComments('#waline-comments', () => {
  NexT.utils.getScript('https://blog-1253475808.file.myqcloud.com/custom_js/Waline.min.js', () => {
    new Waline(Object.assign({"enable":true,"serverURL":"https://waline.burgertown.tk","placeholder":"Just go go","avatar":"retro","meta":["nick","mail","link"],"pageSize":10,"lang":"zh-cn","visitor":true,"comment_count":true,"requiredFields":["nick","mail"],"libUrl":"https://blog-1253475808.file.myqcloud.com/custom_js/Waline.min.js"}, {
      el: '#waline-comments',
      path: "/2017/07/11/Https-Nginx-Hexo-Git/"
    }));
  }, window.Waline);
});
</script></div></body></html>